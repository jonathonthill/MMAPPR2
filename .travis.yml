language: r
cache: packages
r: 
  - bioc-devel
git:
  # To only get latest commit
  depth: 1
pandoc: false
warnings_are_errors: true
sudo: false

bioc_packages:
  - BiocCheck
r_github_packages:
  - Bioconductor/ExperimentHub
  - kjohnsen/MMAPPR2data
  
before_script:
  # so NAMESPACE is up-to-date
  - R -e 'devtools::document(roclets=c("rd", "collate", "namespace"))'
  - R -e 'devtools::test()'

script:
  - R CMD build .
  - R CMD check *tar.gz

after_success:
  # BiocCheck
  - R CMD BiocCheck *tar.gz
